# arc_youtube v2.0.5
# Embed Youtube videos with customised player
# Andy Carter
# https://andy-carter.com/

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YTo5OntzOjQ6Im5hbWUiO3M6MTE6ImFyY195b3V0dWJlIjtzOjc6InZlcnNpb24iO3M6NToi
Mi4wLjUiO3M6NjoiYXV0aG9yIjtzOjExOiJBbmR5IENhcnRlciI7czoxMDoiYXV0aG9yX3Vy
aSI7czoyNDoiaHR0cHM6Ly9hbmR5LWNhcnRlci5jb20vIjtzOjExOiJkZXNjcmlwdGlvbiI7
czo0MzoiRW1iZWQgWW91dHViZSB2aWRlb3Mgd2l0aCBjdXN0b21pc2VkIHBsYXllciI7czo0
OiJ0eXBlIjtpOjA7czo0OiJoZWxwIjtzOjYyNDA6Igk8aDE+YXJjX3lvdXR1YmU8L2gxPgoK
CTxwPkVhc2lseSBlbWJlZCBZb3V0dWJlIHZpZGVvcyBpbiBhcnRpY2xlcyBhbmQgY3VzdG9t
aXNlIHRoZSBhcHBlYXJhbmNlIG9mIHRoZSBwbGF5ZXIuIGFyY195b3V0dWJlIHVzZXMgdGhl
IG5ldyBpZnJhbWUgcGxheWVyLjwvcD4KCgk8aDIgaWQ9ImhlbHAtc2VjdGlvbjAzIj5UYWdz
PC9oMj4KCgk8aDM+YXJjX3lvdXR1YmU8L2gzPgoKCTxwPkVtYmVkcyBhIFlvdXR1YmUgdmlk
ZW8gaW4gdGhlIHBhZ2UgdXNpbmcgYW4gaWZyYW1lLjwvcD4KCjxwcmU+PGNvZGU+Jmx0O3R4
cDphcmNfeW91dHViZSAvJmd0Owo8L2NvZGU+PC9wcmU+CgoJPGg0PlZpZGVvIGFuZCBwbGF5
bGlzdCBhdHRyaWJ1dGVzPC9oND4KCgk8dWw+CgkJPGxpPjxlbT52aWRlbzwvZW0+ICYjODIx
MTsgWW91dHViZSB1cmw8c3VwIGNsYXNzPSJmb290bm90ZSI+PGEgaHJlZj0iI2ZuMTI3MDE0
ODc0NWFmZGQzYzkyZDlmMiI+MTwvYT48L3N1cD4gb3IgdmlkZW8gSUQgZm9yIHRoZSB2aWRl
byB5b3Ugd2FudCB0byBlbWJlZDwvbGk+CgkJPGxpPjxlbT5wbGF5bGlzdDwvZW0+ICYjODIx
MTsgWW91dHViZSBwbGF5bGlzdCBJRCBmb3IgdGhlIHBsYXlsaXN0IHlvdSB3YW50IHRvIGVt
YmVkPC9saT4KCQk8bGk+PGVtPmN1c3RvbTwvZW0+ICYjODIxMTsgTmFtZSBvZiB0aGUgY3Vz
dG9tIGZpZWxkIGNvbnRhaW5pbmcgdmlkZW8gSURzL3VybHMgYXNzb2NpYXRlZCB3aXRoIGFy
dGljbGU8L2xpPgoJCTxsaT48ZW0+c3RhcnQ8L2VtPiAmIzgyMTE7IFN0YXJ0IHBvc2l0aW9u
IG9mIHRoZSB2aWRlbyBhcyBhbiBpbnRlZ2VyPC9saT4KCQk8bGk+PGVtPmF1dG88L2VtPiAm
IzgyMTE7ICYjODIxNjsxJiM4MjE3OyB0byBhdXRvcGxheSB0aGUgdmlkZW8sICYjODIxNjsw
JiM4MjE3OyB0byB0dXJuIG9mZiBhdXRvcGxheSAoZGVmYXVsdCk8L2xpPgoJCTxsaT48ZW0+
bG9vcDwvZW0+ICYjODIxMTsgJiM4MjE2OzEmIzgyMTc7IHRvIHBsYXkgdGhlIHZpZGVvIGlu
IGEgbG9vcCwgJiM4MjE2OzAmIzgyMTc7IGZvciBhIHNpbmdsZSBwbGF5PC9saT4KCQk8bGk+
PGVtPnBsYXlzaW5saW5lPC9lbT4gJiM4MjExOyAmIzgyMTY7MSYjODIxNzsgY2F1c2VzIGlu
bGluZSBwbGF5YmFjayBvbiBpT1MsICYjODIxNjswJiM4MjE3OyBmdWxsc2NyZWVuIHBsYXli
YWNrPC9saT4KCTwvdWw+CgoJPHAgaWQ9ImZuMTI3MDE0ODc0NWFmZGQzYzkyZDlmMiIgY2xh
c3M9ImZvb3Rub3RlIj48c3VwPjE8L3N1cD4gVGhlIHVybCBjYW4gYmUgZWl0aGVyIGZvciBh
biBpbmRpdmlkdWFsIHZpZGVvIG9yIGZvciBhIHBsYXlsaXN0LjwvcD4KCgk8aDQ+QmFzaWMg
YXR0cmlidXRlczwvaDQ+CgoJPHVsPgoJCTxsaT48ZW0+bGluazwvZW0+ICYjODIxMTsgU2V0
IHRvICYjODIxNjsxJiM4MjE3OyB0byBzaG93IGEgbGluayB0byB0aGUgWW91dHViZSB2aWRl
byBwYWdlIGJlbG93IHRoZSBwbGF5ZXI7IHRoZSBsaW5rIHRleHQgd2lsbCBiZSB0aGUgPHNw
YW4gY2xhc3M9ImNhcHMiPlVSTDwvc3Bhbj4gb3IgdGhlIHRleHQgYmV0d2VlbiBvcGVuaW5n
IGFuZCBjbG9zaW5nIHRhZ3M8L2xpPgoJCTxsaT48ZW0+bGFiZWw8L2VtPiAmIzgyMTE7IExh
YmVsIGZvciB0aGUgdmlkZW88L2xpPgoJCTxsaT48ZW0+bGFiZWx0YWc8L2VtPiAmIzgyMTE7
IEluZGVwZW5kZW50IHdyYXB0YWcgZm9yIGxhYmVsPC9saT4KCQk8bGk+PGVtPndyYXB0YWc8
L2VtPiAmIzgyMTE7IDxzcGFuIGNsYXNzPSJjYXBzIj5IVE1MPC9zcGFuPiB0YWcgdG8gYmUg
dXNlZCBhcyB0aGUgd3JhcHRhZywgd2l0aG91dCBicmFja2V0czwvbGk+CgkJPGxpPjxlbT5j
bGFzczwvZW0+ICYjODIxMTsgPHNwYW4gY2xhc3M9ImNhcHMiPkNTUzwvc3Bhbj4gY2xhc3Mg
YXR0cmlidXRlIGZvciB3cmFwdGFnPC9saT4KCTwvdWw+CgoJPGg0PkN1c3RvbWlzaW5nIHRo
ZSBZb3V0dWJlIHBsYXllcjwvaDQ+CgoJPHA+U29tZSBvZiB0aGUgYXR0cmlidXRlcyB3aXRo
IHRoaXMgcGx1Z2luIGFyZSBzdWJqZWN0IHRvIGNoYW5nZSBpZiBZb3V0dWJlIGNoYW5nZSB0
aGVpciBzdXBwb3J0ZWQgcGFyYW1ldGVycyBmb3IgdGhlIHBsYXllci4gU29tZSB3aWxsIG5v
dCB3b3JrIHdpdGggdGhlIEhUTUw1IHBsYXllciB3aGljaCB0aGUgcGxheWVyIGRlZmF1bHRz
IHRvIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIGl0LjwvcD4KCgk8dWw+CgkJPGxpPjxlbT53
aWR0aDwvZW0+ICYjODIxMTsgV2lkdGggb2YgdmlkZW88L2xpPgoJCTxsaT48ZW0+aGVpZ2h0
PC9lbT4gJiM4MjExOyBIZWlnaHQgb2YgdmlkZW88L2xpPgoJCTxsaT48ZW0+cmF0aW88L2Vt
PiAmIzgyMTE7IEFzcGVjdCByYXRpbyAoZGVmYXVsdHMgdG8gNDozKTwvbGk+CgkJPGxpPjxl
bT50aGVtZTwvZW0+ICYjODIxMTsgVXNlIGVpdGhlciB0aGUgJiM4MjIwO2RhcmsmIzgyMjE7
IG9yICYjODIyMDtsaWdodCYjODIyMTsgWW91dHViZSBwbGF5ZXI8L2xpPgoJCTxsaT48ZW0+
Y29sb3I8L2VtPiAmIzgyMTE7IFVzZSBlaXRoZXIgYSAmIzgyMjA7cmVkJiM4MjIxOyBvciAm
IzgyMjA7d2hpdGUmIzgyMjE7IHZpZGVvIHByb2dyZXNzIGJhcjwvbGk+CgkJPGxpPjxlbT5t
b2Rlc3RicmFuZGluZzwvZW0+ICYjODIxMTsgJiM4MjE2OzEmIzgyMTc7IHRvIHByZXZlbnQg
dGhlIFlvdVR1YmUgbG9nbyBmcm9tIGRpc3BsYXlpbmcgaW4gdGhlIGNvbnRyb2wgYmFyPC9s
aT4KCQk8bGk+PGVtPmZzPC9lbT4gJiM4MjExOyAmIzgyMTY7MSYjODIxNzsgdG8gYWxsb3cg
ZnVsbCBzY3JlZW4sICYjODIxNjswJiM4MjE3OyB0byAgZGlzYWJsZSBmdWxsIHNjcmVlbiBt
b2RlPHN1cCBjbGFzcz0iZm9vdG5vdGUiPjxhIGhyZWY9IiNmbjEyMDc0MTkxMzk1YWZkZDNj
OTJmNjFkIj4yPC9hPjwvc3VwPjwvbGk+CgkJPGxpPjxlbT5jYzwvZW0+ICYjODIxMTsgJiM4
MjE2OzEmIzgyMTc7IHRvIGRpc3BsYXkgY2FwdGlvbnMvc3VidGl0bGVzIGJ5IGRlZmF1bHQs
ICYjODIxNjswJiM4MjE3OyB0byB1c2UgdGhlIHVzZXImIzgyMTc7cyBwcmVmZXJlbmNlPHN1
cCBjbGFzcz0iZm9vdG5vdGUiPjxhIGhyZWY9IiNmbjEyMDc0MTkxMzk1YWZkZDNjOTJmNjFk
Ij4yPC9hPjwvc3VwPjwvbGk+CgkJPGxpPjxlbT5yZWxhdGVkPC9lbT4gJiM4MjExOyAmIzgy
MTY7MSYjODIxNzsgdG8gc2hvdyByZWxhdGVkIHZpZGVvcywgJiM4MjE2OzAmIzgyMTc7IHRv
IHR1cm4gdGhlbSBvZmY8L2xpPgoJCTxsaT48ZW0+cHJpdmFjeTwvZW0+ICYjODIxMTsgJiM4
MjE2OzEmIzgyMTc7IGZvciBlbmhhbmNlZCBwcml2YWN5IG1vZGUsIG5vIGNvb2tpZXMgdW5s
ZXNzIHRoZSB1c2VyIGNsaWNrcyBwbGF5LCAmIzgyMTY7MCYjODIxNzsgbm9ybWFsIG1vZGU8
L2xpPgoJCTxsaT48ZW0+YXV0b2hpZGU8L2VtPiAmIzgyMTE7ICYjODIxNjsyJiM4MjE3OyBm
b3IgdGhlIHZpZGVvIHByb2dyZXNzIGJhciB0byBmYWRlIG91dCB3aGlsZSB0aGUgcGxheWVy
IGNvbnRyb2xzIChwbGF5IGJ1dHRvbiwgdm9sdW1lIGNvbnRyb2wsIGV0Yy4pIHJlbWFpbiB2
aXNpYmxlOyAmIzgyMTY7MSYjODIxNzsgZm9yIHRoZSB2aWRlbyBwcm9ncmVzcyBiYXIgYW5k
IHRoZSBwbGF5ZXIgY29udHJvbHMgd2lsbCBzbGlkZSBvdXQgb2YgdmlldyBhIGNvdXBsZSBv
ZiBzZWNvbmRzIGFmdGVyIHRoZSB2aWRlbyBzdGFydHMgcGxheWluZzsgb3IgJiM4MjE2OzAm
IzgyMTc7IHRvIGFsd2F5cyBzaG93IHRoZSBwcm9ncmVzcyBiYXIgYW5kIGNvbnRyb2xzPC9s
aT4KCQk8bGk+PGVtPmNvbnRyb2xzPC9lbT4gJiM4MjExOyAmIzgyMTY7MiYjODIxNzsgdG8g
ZGlzcGxheSB0aGUgY29udHJvbHMgaW4gdGhlIHBsYXllciwgJiM4MjE2OzAmIzgyMTc7IHRv
IGhpZGUgdGhlbTwvbGk+CgkJPGxpPjxlbT5hbm5vdGF0aW9uczwvZW0+ICYjODIxMTsgJiM4
MjE2OzEmIzgyMTc7IHRvIHNob3cgYW5ub3RhdGlvbnMsICYjODIxNjszJiM4MjE3OyB0byBo
aWRlIHRoZW08L2xpPgoJCTxsaT48ZW0+dGl0bGU8L2VtPiAmIzgyMTE7ICYjODIxNjswJiM4
MjE3OyB0byBoaWRlIHRoZSB2aWRlbyYjODIxNztzIHRpdGxlIGFuZCBvdGhlciBpbmZvcm1h
dGlvbiwgJiM4MjE2OzEmIzgyMTc7IGJ5IGRlZmF1bHQgdG8gc2hvdyB0aGUgaW5mb3JtYXRp
b248L2xpPgoJPC91bD4KCgk8cCBpZD0iZm4xMjA3NDE5MTM5NWFmZGQzYzkyZjYxZCIgY2xh
c3M9ImZvb3Rub3RlIj48c3VwPjI8L3N1cD4gTm90IHN1cHBvcnRlZCBieSB0aGUgSFRNTDUg
cGxheWVyLjwvcD4KCgk8aDM+YXJjX2lmX3lvdXR1YmU8L2gzPgoKCTxwPlRoZSBhcmNfaXNf
eW91dHViZSB0YWcgaXMgYSA8ZW0+Y29uZGl0aW9uYWwgdGFnPC9lbT4gYW5kIGFsd2F5cyB1
c2VkIGFzIGFuIG9wZW5pbmcgYW5kIGNsb3NpbmcgcGFpci4gSXQgd2lsbCByZW5kZXIgdGhl
IGNvbnRlbnQgYmV0d2VlbiB0aGUgdGFncyBpZiB0aGUgdmlkZW8gYXR0cmlidXRlIGlzIGEg
dmFsaWQgWW91dHViZSA8c3BhbiBjbGFzcz0iY2FwcyI+VVJMPC9zcGFuPi48L3A+Cgo8cHJl
Pjxjb2RlPiZsdDt0eHA6YXJjX2lmX3lvdXR1YmUgdmlkZW89JnF1b3Q7W1VSTF0mcXVvdDsm
Z3Q7Jmx0Oy90eHA6YXJjX2lmX3lvdXR1YmUmZ3Q7CjwvY29kZT48L3ByZT4KCgk8aDQ+UGFy
YW1ldGVyczwvaDQ+CgoJPHA+VXNlIG9uZSBvciB0aGUgb3RoZXIgb2YgdGhlIGZvbGxvd2lu
ZzotPC9wPgoKCTx1bD4KCQk8bGk+PGVtPmN1c3RvbTwvZW0+ICYjODIxMTsgTmFtZSBvZiB0
aGUgY3VzdG9tIGZpZWxkIGNvbnRhaW5pbmcgdmlkZW8gSURzL3VybHMgYXNzb2NpYXRlZCB3
aXRoIGFydGljbGU8L2xpPgoJCTxsaT48ZW0+dmlkZW88L2VtPiAmIzgyMTE7IEEgPHNwYW4g
Y2xhc3M9ImNhcHMiPlVSTDwvc3Bhbj4gdG8gY2hlY2sgaWYgaXQgaXMgYSB2YWxpZCBZb3V0
dWJlIDxzcGFuIGNsYXNzPSJjYXBzIj5VUkw8L3NwYW4+PC9saT4KCTwvdWw+CgoJPGgyIGlk
PSJoZWxwLXNlY3Rpb24wNCI+RXhhbXBsZXM8L2gyPgoKCTxoMz5FeGFtcGxlIDE6IFVzZSBj
dXN0b20gZmllbGQgdG8gYXNzb2NpYXRlIHZpZGVvIHdpdGggYW4gYXJ0aWNsZTwvaDM+Cgo8
cHJlPjxjb2RlPiZsdDt0eHA6YXJjX3lvdXR1YmUgY3VzdG9tPSZxdW90O1lvdXR1YmUmcXVv
dDsgLyZndDsKPC9jb2RlPjwvcHJlPgoKCTxoMz5FeGFtcGxlIDI6IEN1c3RvbWlzZSB0aGUg
YXBwZWFyYW5jZSBvZiB0aGUgcGxheWVyIGFuZCBhc3NvY2lhdGUgdmlkZW8gd2l0aCBjdXN0
b20gZmllbGQ8L2gzPgoKPHByZT48Y29kZT4mbHQ7dHhwOmFyY195b3V0dWJlIHRoZW1lPSZx
dW90O2xpZ2h0JnF1b3Q7IG1vZGVzdGJyYW5kaW5nPSZxdW90OzEmcXVvdDsgY3VzdG9tPSZx
dW90O1lvdXR1YmUmcXVvdDsgLyZndDsKPC9jb2RlPjwvcHJlPgoKCTxwPlRoaXMgd2lsbCB1
c2UgdGhlIDxlbT5saWdodDwvZW0+IHBsYXllciB0aGVtZSB3aXRoIG1vZGVzdCBicmFuZGlu
ZyAoPGk+aS5lLjwvaT4gcmVtb3ZlcyB0aGUgWW91dHViZSBsb2dvIGZyb20gdGhlIGNvbnRy
b2xzKS4gQXMgZXhhbXBsZSAxLCB0aGUgdmlkZW8gaXMgc2VsZWN0ZWQgdXNpbmcgYW4gYXJ0
aWNsZSYjODIxNztzIGN1c3RvbSBmaWVsZCBjYWxsZWQgJiM4MjE2O1lvdXR1YmUmIzgyMTc7
LjwvcD4KCgk8aDM+RXhhbXBsZSAzOiBTbWFsbCB2aWRlbyBwbGF5ZXIgd2l0aCBmaXhlZCB2
aWRlbzwvaDM+Cgo8cHJlPjxjb2RlPiZsdDt0eHA6YXJjX3lvdXR1YmUgd2lkdGg9JnF1b3Q7
MjAwJnF1b3Q7IHZpZGVvPSZxdW90O3RnYk55bVo3dnFZJnF1b3Q7IC8mZ3Q7CjwvY29kZT48
L3ByZT4KCgk8cD5IZXJlIHRoZSB2aWRlbyBpcyBkZWZpbmVkIHdpdGhpbiB0aGUgdGFnIHVz
aW5nIHRoZSB2aWRlbyBhdHRyaWJ1dGUgd2hpY2ggaGFzIGJlZW4gZ2l2ZW4gdGhlIHZhbHVl
IG9mIFlvdXR1YmUmIzgyMTc7cyB2aWRlbyBJRCwgYWx0ZXJuYXRpdmVseSB0aGlzIHZhbHVl
IGNvdWxkIGhhdmUgYmVlbiB0aGUgdmlkZW8mIzgyMTc7cyA8c3BhbiBjbGFzcz0iY2FwcyI+
VVJMPC9zcGFuPi48L3A+CgoJPGgyIGlkPSJoZWxwLXNlY3Rpb24wNSI+QXV0aG9yPC9oMj4K
Cgk8cD48YSBocmVmPSJodHRwczovL2FuZHktY2FydGVyLmNvbSI+QW5keSBDYXJ0ZXI8L2E+
LjwvcD4KCgk8aDIgaWQ9ImhlbHAtc2VjdGlvbjA2Ij5MaWNlbnNlPC9oMj4KCgk8cD5UaGUg
PHNwYW4gY2xhc3M9ImNhcHMiPk1JVDwvc3Bhbj4gTGljZW5zZSAoPHNwYW4gY2xhc3M9ImNh
cHMiPk1JVDwvc3Bhbj4pPC9wPgoKCTxwPjxhIGhyZWY9Imh0dHBzOi8vZ2l0aHViLmNvbS9k
cm1vbmtleW5pbmphL2FyY195b3V0dWJlL2Jsb2IvbWFzdGVyL0xJQ0VOU0UiPkxpY2Vuc2U8
L2E+PC9wPiI7czo0OiJjb2RlIjtzOjU3ODU6IgpmdW5jdGlvbiBhcmNfeW91dHViZSgkYXR0
cywgJHRoaW5nKQp7CiAgICBnbG9iYWwgJHRoaXNhcnRpY2xlOwoKICAgIGV4dHJhY3QobEF0
dHMoYXJyYXkoCiAgICAgICAgJ3ZpZGVvJyAgICAgPT4gJycsCiAgICAgICAgJ3BsYXlsaXN0
JyAgPT4gJycsCiAgICAgICAgJ2N1c3RvbScgICAgPT4gJ1lvdXR1YmUgSUQnLAogICAgICAg
ICd3aWR0aCcgICAgID0+ICcwJywKICAgICAgICAnaGVpZ2h0JyAgICA9PiAnMCcsCiAgICAg
ICAgJ3JhdGlvJyAgICAgPT4gJzQ6MycsCiAgICAgICAgJ2NvbG9yJyAgICAgPT4gJ3JlZCcs
IC8vIG9yICd3aGl0ZScKICAgICAgICAnZnMnICAgICAgICA9PiAnMScsCiAgICAgICAgJ2Nj
JyAgICAgICAgPT4gMCwKICAgICAgICAncmVsYXRlZCcgICA9PiAxLAogICAgICAgICdzdGFy
dCcgICAgID0+IDAsCiAgICAgICAgJ3RoZW1lJyAgICAgPT4gJ2RhcmsnLAogICAgICAgICdw
cml2YWN5JyAgID0+ICcwJywKICAgICAgICAnYXV0bycgICAgICA9PiAnMCcsCiAgICAgICAg
J2F1dG9oaWRlJyAgPT4gbnVsbCwKICAgICAgICAnY29udHJvbHMnICA9PiBudWxsLAogICAg
ICAgICdhbm5vdGF0aW9ucycgPT4gbnVsbCwgLy8gMSBvciAzCiAgICAgICAgJ2xvb3AnICAg
ICAgPT4gMCwKICAgICAgICAnbW9kZXN0YnJhbmRpbmcnID0+IG51bGwsCiAgICAgICAgJ3Bs
YXlzaW5saW5lJyA9PiBudWxsLCAvLyAwIG9yIDEKICAgICAgICAndGl0bGUnICAgICA9PiBu
dWxsLAogICAgICAgICdsaW5rJyAgICAgID0+ICcwJywKICAgICAgICAnbGFiZWwnICAgICA9
PiAnJywKICAgICAgICAnbGFiZWx0YWcnICA9PiAnJywKICAgICAgICAnd3JhcHRhZycgICA9
PiAnJywKICAgICAgICAnY2xhc3MnICAgICA9PiBfX0ZVTkNUSU9OX18KICAgICksICRhdHRz
KSk7CgogICAgJGN1c3RvbSA9IHN0cnRvbG93ZXIoJGN1c3RvbSk7CiAgICBpZiAoISR2aWRl
byAmJiBpc3NldCgkdGhpc2FydGljbGVbJGN1c3RvbV0pKSB7CiAgICAgICAgJHZpZGVvID0g
JHRoaXNhcnRpY2xlWyRjdXN0b21dOwogICAgfQoKICAgICR2ID0gbnVsbDsKICAgICRwID0g
bnVsbDsKCiAgICAvLyBDaGVjayBmb3IgWW91dHViZSB2aWRlbyBJRCBvciBZb3V0dWJlIFVS
TCB0byBleHRyYWN0IElEIGZyb20KICAgICRtYXRjaCA9IF9hcmNfeW91dHViZSgkdmlkZW8p
OwogICAgaWYgKCFlbXB0eSgkbWF0Y2hbJ3YnXSkpIHsKICAgICAgICAkdiA9ICRtYXRjaFsn
diddOwogICAgfSBlbHNlaWYgKCFlbXB0eSgkbWF0Y2hbJ3AnXSkpIHsKICAgICAgICAkcCA9
ICRtYXRjaFsncCddOwogICAgfSBlbHNlaWYgKCFlbXB0eSgkdmlkZW8pKSB7CiAgICAgICAg
JHYgPSAkdmlkZW87CiAgICB9IGVsc2VpZiAoIWVtcHR5KCRwbGF5bGlzdCkpIHsKICAgICAg
ICAkcCA9ICRwbGF5bGlzdDsKICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICcnOwogICAg
fQoKICAgICRzcmMgPSAnaHR0cHM6Ly93d3cueW91dHViZScgLiAoJHByaXZhY3kgPyAnLW5v
Y29va2llJyA6ICcnKSAuICcuY29tL2VtYmVkLyc7CgogICAgJHNyYyAuPSAhZW1wdHkoJHYp
ID8gJHYgOiBudWxsOwoKICAgICRxU3RyaW5nID0gYXJyYXkoKTsKCiAgICAvLyBTZXR1cCB0
aGUgcGxheWxpc3QuCiAgICBpZiAoIWVtcHR5KCRwKSkgewogICAgICAgICRxU3RyaW5nW10g
PSAnbGlzdFR5cGU9cGxheWxpc3QnOwogICAgICAgICRxU3RyaW5nW10gPSAnbGlzdD0nIC4g
JHA7CiAgICB9CgogICAgLy8gU2V0IHRoZSBwbGF5ZXIgVUkncyB0aGVtZSBhbmQgY29sb3Vy
LgogICAgJHFTdHJpbmdbXSA9ICd0aGVtZT0nIC4gKCR0aGVtZSA9PSAnZGFyaycgPyAnZGFy
aycgOiAnbGlnaHQnKTsKICAgICRxU3RyaW5nW10gPSAnY29sb3I9JyAuICgkY29sb3IgPT0g
J3JlZCcgPyAncmVkJyA6ICd3aGl0ZScpOwoKICAgIC8vIERpc2FibGUgdGhlIGZ1bGxzY3Jl
ZW4gYnV0dG9uIGluIHRoZSBBUzMgcGxheWVyIChub3Qgc3VwcG9ydGVkIGJ5IHRoZQogICAg
Ly8gbmV3ZXIgSFRNTDUgcGxheWVyKS4KICAgIGlmICghJGZzKSB7CiAgICAgICAgJHFTdHJp
bmdbXSA9ICdmcz0wJzsKICAgIH0KCiAgICAvLyBFbmFibGUgYXV0b3BsYXkuCiAgICBpZiAo
JGF1dG8pIHsKICAgICAgICAkcVN0cmluZ1tdID0gJ2F1dG9wbGF5PTEnOwogICAgfQoKICAg
IC8vIERldGVybWluZSB0aGUgYXBwZWFyYW5jZSBvZiB0aGUgcGxheWVyJ3MgY29udHJvbHMu
CiAgICBpZiAoJGF1dG9oaWRlICE9PSBudWxsICYmIGluX2FycmF5KCRhdXRvaGlkZSwgYXJy
YXkoMCwgMSwgMikpKSB7CiAgICAgICAgJHFTdHJpbmdbXSA9ICdhdXRvaGlkZT0nIC4gJGF1
dG9oaWRlOwogICAgfQogICAgaWYgKCRjb250cm9scyAhPT0gbnVsbCAmJiBpbl9hcnJheSgk
Y29udHJvbHMsIGFycmF5KDAsIDEsIDIpKSkgewogICAgICAgICRxU3RyaW5nW10gPSAnY29u
dHJvbHM9JyAuICRjb250cm9sczsKICAgIH0KCiAgICAvLyBFbmFibGUvRGlzYWJsZSBhbm5v
dGF0aW9ucyBkaXNwbGF5IGJ5IGRlZmF1bHQuCiAgICBpZiAoJGFubm90YXRpb25zICE9PSBu
dWxsICYmIGluX2FycmF5KCRhbm5vdGF0aW9ucywgYXJyYXkoMSwgMykpKSB7CiAgICAgICAg
JHFTdHJpbmdbXSA9ICdpdl9sb2FkX3BvbGljeT0nIC4gJGFubm90YXRpb25zOwogICAgfQoK
ICAgIC8vIEVuYWJsZSBsb29waW5nIG9mIHRoZSB2aWRlby4KICAgIGlmICgkbG9vcCkgewog
ICAgICAgICRxU3RyaW5nW10gPSAnbG9vcD0xJzsKICAgIH0KCiAgICAvLyBFbmFibGUgbW9k
ZXN0IGJyb3dzaW5nIChyZW1vdmVzIHRoZSBZb3V0dWJlIGxvZ28gZnJvbSB0aGUgY29udHJv
bHMpLgogICAgaWYgKCRtb2Rlc3RicmFuZGluZykgewogICAgICAgICRxU3RyaW5nW10gPSAn
bW9kZXN0YnJhbmRpbmc9MSc7CiAgICB9CgogICAgaWYgKCRwbGF5c2lubGluZSAhPT0gbnVs
bCAmJiBpbl9hcnJheSgkcGxheXNpbmxpbmUsIGFycmF5KDAsIDEpKSkgewogICAgICAgICRx
U3RyaW5nW10gPSAncGxheXNpbmxpbmU9JyAuICRwbGF5c2lubGluZTsKICAgIH0KCiAgICAv
LyBTZXQgdGhlIHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSB2aWRlby4KICAgIGlmICgkc3RhcnQp
IHsKICAgICAgICAkcVN0cmluZ1tdID0gJ3N0YXJ0PScgLiAkc3RhcnQ7CiAgICB9CgogICAg
Ly8gU2hvdyBvciBoaWRlIHRoZSB2aWRlbyB0aXRsZSBhbmQgb3RoZXIgaW5mb3JtYXRpb24u
CiAgICBpZiAoJHRpdGxlIT09bnVsbCkgewogICAgICAgICRxU3RyaW5nW10gPSAnc2hvd2lu
Zm89JyAuICgkdGl0bGUgPyAnMScgOiAnMCcpOwogICAgfQoKICAgIC8vIEVuYWJsZSBjYXB0
aW9ucyBvbiBieSBkZWZhdWx0IGluIHRoZSBBUzMgcGxheWVyIChub3Qgc3VwcG9ydGVkIGJ5
IHRoZQogICAgLy8gbmV3ZXIgSFRNTDUgcGxheWVyKS4KICAgIGlmICgkY2MpIHsKICAgICAg
ICAkcVN0cmluZ1tdID0gJ2NjX2xvYWRfcG9saWN5PTEnOwogICAgfQoKICAgIC8vIERpc2Fi
bGUgcmVsYXRlZCB2aWRlb3MuCiAgICBpZiAoISRyZWxhdGVkKSB7CiAgICAgICAgJHFTdHJp
bmdbXSA9ICdyZWw9MCc7CiAgICB9CgogICAgLy8gQ2hlY2sgaWYgd2UgbmVlZCB0byBhcHBl
bmQgYSBxdWVyeSBzdHJpbmcgdG8gdGhlIHZpZGVvIHNyYy4KICAgIGlmICghZW1wdHkoJHFT
dHJpbmcpKSB7CiAgICAgICAgJHNyYyAuPSAnPycgLiBpbXBsb2RlKCcmYW1wOycsICRxU3Ry
aW5nKTsKICAgIH0KCiAgICAvLyBJZiB0aGUgd2lkdGggYW5kL29yIGhlaWdodCBoYXMgbm90
IGJlZW4gc2V0IHdlIHdhbnQgdG8gY2FsY3VsYXRlIG5ldwogICAgLy8gb25lcyB1c2luZyB0
aGUgYXNwZWN0IHJhdGlvLgogICAgaWYgKCEkd2lkdGggfHwgISRoZWlnaHQpIHsKICAgICAg
ICAkdG9vbGJhckhlaWdodCA9IDI1OwoKICAgICAgICAvLyBXb3JrIG91dCB0aGUgYXNwZWN0
IHJhdGlvLgogICAgICAgIHByZWdfbWF0Y2goIi8oXGQrKTooXGQrKS8iLCAkcmF0aW8sICRt
YXRjaGVzKTsKICAgICAgICBpZiAoJG1hdGNoZXNbMF0gJiYgJG1hdGNoZXNbMV0gIT0gMCAm
JiAkbWF0Y2hlc1syXSAhPSAwKSB7CiAgICAgICAgICAgICRhc3BlY3QgPSAkbWF0Y2hlc1sx
XS8kbWF0Y2hlc1syXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkYXNwZWN0ID0g
MS4zMzM7CiAgICAgICAgfQoKICAgICAgICAvLyBDYWxjdWF0ZSB0aGUgbmV3IHdpZHRoL2hl
aWdodC4KICAgICAgICBpZiAoJHdpZHRoKSB7CiAgICAgICAgICAgICRoZWlnaHQgPSAkd2lk
dGgvJGFzcGVjdCArICR0b29sYmFySGVpZ2h0OwogICAgICAgIH0gZWxzZWlmICgkaGVpZ2h0
KSB7CiAgICAgICAgICAgICR3aWR0aCA9ICgkaGVpZ2h0LSR0b29sYmFySGVpZ2h0KSokYXNw
ZWN0OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICR3aWR0aCA9IDQyNTsKICAgICAg
ICAgICAgJGhlaWdodCA9IDM0NDsKICAgICAgICB9CgogICAgfQoKICAgICRvdXQgPSAnPGlm
cmFtZSB3aWR0aD0iJyAuICR3aWR0aCAuICciIGhlaWdodD0iJyAuICRoZWlnaHQKICAgICAg
LiAnIiBzcmM9IicgLiAkc3JjIC4gJyIgZnJhbWVib3JkZXI9IjAiJwogICAgICAuICgoJGZz
KT8nIGFsbG93ZnVsbHNjcmVlbic6JycpIC4gJz48L2lmcmFtZT4nOwoKICAgIGlmICgkbGlu
aykgewogICAgICAgICR1cmwgPSAnd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9JyAuICR2Owog
ICAgICAgICRvdXQgLj0gJzxwPjxhIGhyZWY9Imh0dHBzOi8vJyAuICR1cmwgLiAnIiByZWw9
ImV4dGVybmFsIj4nCiAgICAgICAgICAgIC4gKCgkdGhpbmcpP3BhcnNlKCR0aGluZyk6JHVy
bCkKICAgICAgICAgICAgLiAnPC9hPjwvcD4nOwoKICAgIH0KCiAgICByZXR1cm4gZG9MYWJl
bCgkbGFiZWwsICRsYWJlbHRhZykuKCgkd3JhcHRhZykgPyBkb1RhZygkb3V0LCAkd3JhcHRh
ZywgJGNsYXNzKSA6ICRvdXQpOwp9CgpmdW5jdGlvbiBhcmNfaWZfeW91dHViZSgkYXR0cywg
JHRoaW5nKQp7CiAgICBnbG9iYWwgJHRoaXNhcnRpY2xlOwoKICAgIGV4dHJhY3QobEF0dHMo
YXJyYXkoCiAgICAgICAgJ2N1c3RvbScgPT4gbnVsbCwKICAgICAgICAndmlkZW8nID0+IG51
bGwKICAgICksICRhdHRzKSk7CgogICAgJHJlc3VsdCA9ICR2aWRlbyA/IF9hcmNfeW91dHVi
ZSgkdmlkZW8pIDogX2FyY195b3V0dWJlKCR0aGlzYXJ0aWNsZVtzdHJ0b2xvd2VyKCRjdXN0
b20pXSk7CgogICAgcmV0dXJuIHBhcnNlKEV2YWxFbHNlKCR0aGluZywgJHJlc3VsdCkpOwp9
CgpmdW5jdGlvbiBfYXJjX3lvdXR1YmUoJHZpZGVvKQp7CiAgICBpZiAocHJlZ19tYXRjaCgi
L15bYS16QS1aXStbOlwvXC9dK1tBLVphLXowLTlcLV9dK1xcLnlvdXR1YmVcXC4rW0EtWmEt
ejAtOVwuXC8lJj1cP1wtX10rJC9pIiwgJHZpZGVvKSkgewogICAgICAgICR1cmxjID0gcGFy
c2VfdXJsKCR2aWRlbyk7CiAgICAgICAgJHFzdHIgPSAkdXJsY1sncXVlcnknXTsKICAgICAg
ICBwYXJzZV9zdHIoJHFzdHIsICRxYXJyKTsKCiAgICAgICAgaWYgKGlzc2V0KCRxYXJyWyd2
J10pKSB7CiAgICAgICAgICAgIHJldHVybiBhcnJheSgndicgPT4gJHFhcnJbJ3YnXSk7Cgog
ICAgICAgIH0gZWxzZWlmIChpc3NldCgkcWFyclsncCddKSkgewogICAgICAgICAgICByZXR1
cm4gYXJyYXkoJ3AnID0+ICRxYXJyWydwJ10pOwoKICAgICAgICB9IGVsc2UgewogICAgICAg
ICAgICByZXR1cm4gZmFsc2U7CgogICAgICAgIH0KCiAgICB9IGVsc2VpZiAocHJlZ19tYXRj
aCgiL15bYS16QS1aXStbOlwvXC9dK3lvdXR1XC5iZVwvKFtBLVphLXowLTldKykvaSIsICR2
aWRlbywgJG1hdGNoZXMpKSB7CiAgICAgICAgcmV0dXJuIGFycmF5KCd2JyA9PiAkbWF0Y2hl
c1sxXSk7CgogICAgfQoKICAgIHJldHVybiBmYWxzZTsKfQoiO3M6MzoibWQ1IjtzOjMyOiI0
YWU3MDM1NGRiODUyMWUxYjQ1NzcyMzBjYmU5MjQ1MyI7fQ==
